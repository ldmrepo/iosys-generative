# 학습 데이터 준비 및 평가 방법 문서

**문서 ID**: ITEM-DATA-EVAL-001
**버전**: v1.0.0
**대상 시스템**: 문항 생성 및 평가 모델 학습 파이프라인
**목적**: 자동 추출된 문항·출제의도 데이터를 정제하여 학습 데이터셋을 구성하고 모델 성능을 정량적으로 평가한다.

---

## 1. 데이터 구성 개요

학습 데이터는 QTI 기반 문항에서 자동 생성된 구조화 데이터로 구성된다.

데이터 생성 흐름:

```
QTI 문항
  → 출제의도 추출
  → 품질 평가
  → 데이터 분류
  → 학습 데이터 생성
```

---

## 2. 데이터 유형

| 유형     | 용도          |
| ------ | ----------- |
| SFT    | 기본 생성 능력 학습 |
| DPO    | 부적절 문항 억제   |
| Refine | 품질 안정화      |
| Reject | 평가모델 강화     |

---

## 3. SFT 데이터 준비

### 포함 조건

* 평가 결과 PASS
* confidence ≥ 0.80
* 단일 정답

### 레코드 형식

```json
{
 "messages":[
  {"role":"user","content":"<ItemSpecLite>"},
  {"role":"assistant","content":"<Item>"}
 ]
}
```

---

## 4. DPO 데이터 준비

### 생성 방법

* PASS 문항을 기준으로 거부사례 생성

### 레코드 형식

```json
{
 "prompt":"<ItemSpecLite>",
 "chosen":"<good item>",
 "rejected":"<bad item>"
}
```

---

## 5. Refine 데이터 준비

초기 생성 문항과 수정 문항을 함께 저장한다.

```
initial → revised
```

---

## 6. 데이터 필터링 정책

| 조건      | 처리     |
| ------- | ------ |
| 정답 다중   | 제거     |
| JSON 오류 | 제거     |
| 의도 불일치  | DPO    |
| 난이도 불일치 | Refine |

---

## 7. 데이터 분할

| 세트         | 비율  |
| ---------- | --- |
| Train      | 80% |
| Validation | 10% |
| Test       | 10% |

동일 출제의도는 서로 다른 세트에 포함하지 않는다.

---

## 8. 모델 평가 지표

### 생성 모델

| 지표                  | 기준    |
| ------------------- | ----- |
| JSON Valid Rate     | ≥ 99% |
| Intent Match        | ≥ 85% |
| Difficulty Accuracy | ≥ 80% |
| Unique Answer Rate  | ≥ 95% |
| Reject Detection    | ≥ 90% |

---

### 평가 모델

| 지표              | 기준    |
| --------------- | ----- |
| Human Agreement | ≥ 85% |
| False Accept    | ≤ 5%  |
| False Reject    | ≤ 10% |
| Consistency     | ≥ 90% |

---

## 9. 평가 절차

1. 테스트 세트 생성
2. 모델 생성 결과 수집
3. 평가모델 판정 수행
4. 지표 계산
5. 이전 모델과 비교

---

## 10. 배포 기준

| 조건       | 조치  |
| -------- | --- |
| 모든 지표 만족 | 배포  |
| 일부 미달    | 재학습 |
| 큰 성능 하락  | 롤백  |

---

## 11. 데이터 관리

* JSONL 형식 저장
* 버전별 분리 보관
* 원본 데이터 보존

---

**끝**
