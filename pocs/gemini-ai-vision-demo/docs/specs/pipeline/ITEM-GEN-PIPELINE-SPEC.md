# λ¬Έν•­ μƒμ„± νμ΄ν”„λΌμΈ ν•µμ‹¬ λ…μ„Έ

**λ¬Έμ„ ID**: ITEM-GEN-PIPELINE-SPEC-001
**λ²„μ „**: v2.0.0
**μ‘μ„±μΌ**: 2026-02-01
**λ©μ **: AI κΈ°λ° λ¬Έν•­ μƒμ„± νμ΄ν”„λΌμΈ ν•µμ‹¬ νλ¦„ λ° λ°μ΄ν„° λ…μ„Έ

> π“ κ° λ‹¨κ³„μ μƒμ„Έ μ‚¬μ–‘μ€ P1~P5 κ°λ³„ λ¬Έμ„λ¥Ό μ°Έμ΅°ν•μ„Έμ”.

---

## 1. νμ΄ν”„λΌμΈ μ•„ν‚¤ν…μ²

```
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚                         ITEM GENERATION PIPELINE                            β”‚
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¤
β”‚                                                                             β”‚
β”‚    P1-INPUT        P2-ANALYZE      P3-GENERATE     P4-VALIDATE    P5-OUTPUT β”‚
β”‚                                                                             β”‚
β”‚   β”β”€β”€β”€β”€β”€β”€β”€β”€β”      β”β”€β”€β”€β”€β”€β”€β”€β”€β”      β”β”€β”€β”€β”€β”€β”€β”€β”€β”      β”β”€β”€β”€β”€β”€β”€β”€β”€β”    β”β”€β”€β”€β”€β”€β”€β”€β”€β” β”‚
β”‚   β”‚InputPackβ”‚ β”€β”€β–¶ β”‚Evidenceβ”‚ β”€β”€β–¶  β”‚ Draft  β”‚ β”€β”€β–¶  β”‚Validationβ”‚β”€β”€β–¶β”‚ Final  β”‚ β”‚
β”‚   β”‚        β”‚      β”‚  Pack  β”‚      β”‚  Item  β”‚      β”‚ Report β”‚    β”‚  Item  β”‚ β”‚
β”‚   β””β”€β”€β”€β”€β”€β”€β”€β”€β”      β””β”€β”€β”€β”€β”€β”€β”€β”€β”      β””β”€β”€β”€β”€β”€β”€β”€β”€β”      β””β”€β”€β”€β”€β”€β”€β”€β”€β”    β””β”€β”€β”€β”€β”€β”€β”€β”€β” β”‚
β”‚                                                                             β”‚
β”‚       -           [AG-VIS]        [AG-GEN]        [AG-VAL]      [AG-IMG]   β”‚
β”‚                                                   [AG-CALC]     [AG-STD]   β”‚
β”‚                                                   [AG-FACT]     [AG-AUD]   β”‚
β”‚                                                   [AG-SAFE]                 β”‚
β”‚                                                                             β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
```

---

## 2. λ°μ΄ν„° νλ¦„

### 2.1 ν•µμ‹¬ λ°μ΄ν„° κ°μ²΄

| κ°μ²΄ | μƒμ„± λ‹¨κ³„ | μ„¤λ… |
|------|----------|------|
| `InputPack` | P1 | QTI μ›λ³Έ + μ΄λ―Έμ§€ + λ©”νƒ€λ°μ΄ν„° |
| `EvidencePack` | P2 | μ‹κ° λ¶„μ„ + μμ‹ μ¶”μ¶ + κµ¬μ΅° λ¶„μ„ |
| `DraftItem` | P3 | μƒμ„±λ λ¬Έν•­ μ΄μ• (κ²€μ¦ μ „) |
| `ValidationReport` | P4 | κ²€μ¦ κ²°κ³Ό + μ μ + μ΄μ |
| `FinalItem` | P5 | μµμΆ… λ¬Έν•­ + μ΄λ―Έμ§€ + κ°μ‚¬ λ΅κ·Έ |

### 2.2 λ°μ΄ν„° μ „λ‹¬ κ·μΉ™

```
InputPack β”€β”¬β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β–¶ P5 (μ›λ³Έ μ°Έμ΅°)
           β”‚
           β””β–¶ EvidencePack β”€β”¬β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β–¶ P4 (λΉ„κµ κ²€μ¦)
                            β”‚
                            β””β–¶ DraftItem β”€β”€β–¶ ValidationReport β”€β”€β–¶ FinalItem
```

- **μ›λ³Έ λ³΄μ΅΄**: InputPackμ€ μ „ λ‹¨κ³„μ—μ„ μ°Έμ΅° κ°€λ¥
- **μ¦κ±° κΈ°λ°**: EvidencePackμ€ P4μ—μ„ μ •λ‹µ κ²€μ¦ κ·Όκ±°λ΅ μ‚¬μ©
- **λ¶λ³€μ„±**: κ° κ°μ²΄λ” μƒμ„± ν›„ μμ •λμ§€ μ•μ

---

## 3. λ‹¨κ³„λ³„ ν•µμ‹¬ λ…μ„Έ

| λ‹¨κ³„ | ν•µμ‹¬ κΈ°λ¥ | μ—μ΄μ „νΈ | λ©ν‘ μ‹κ°„ | μƒμ„Έ λ¬Έμ„ |
|------|----------|----------|----------|----------|
| **P1** | QTI νμ‹±, μ΄λ―Έμ§€ κ²€μ¦, λ©”νƒ€ μ •κ·ν™” | - | < 1μ΄ | [P1-INPUT-SPEC](P1-INPUT-SPEC.md) |
| **P2** | μ‹κ° λ¶„μ„, μμ‹ μ¶”μ¶, κµ¬μ΅° λ¶„μ„ | AG-VIS | 3~8μ΄ | [P2-ANALYZE-SPEC](P2-ANALYZE-SPEC.md) |
| **P3** | λ¬Έν•­ μƒμ„±, μ¤λ‹µ μ„¤κ³„, μ‹κ° μ‚¬μ–‘ | AG-GEN | 5~15μ΄ | [P3-GENERATE-SPEC](P3-GENERATE-SPEC.md) |
| **P4** | μ •λ‹µ κ²€μ¦, κ³„μ‚°/μ‚¬μ‹¤ ν™•μΈ, νΈν–¥ κ²€μ‚¬ | AG-VAL, AG-CALC, AG-FACT, AG-SAFE | 5~20μ΄ | [P4-VALIDATE-SPEC](P4-VALIDATE-SPEC.md) |
| **P5** | μ΄λ―Έμ§€ μƒμ„±, ν‘μ¤€ν™”, μ¶λ ¥ | AG-IMG, AG-STD, AG-AUD | 3~10μ΄ | [P5-OUTPUT-SPEC](P5-OUTPUT-SPEC.md) |

---

## 4. κ²€μ¦ νμ΄ν”„λΌμΈ

### 4.1 κ³Όλ©λ³„ κ²€μ¦ νλ¦„

```
[μν•™/λ¬Όλ¦¬/ν™”ν•™]
DraftItem β”€β”€β–¶ AG-VAL β”€β”€β–¶ AG-CALC(Code Execution) β”€β”€β–¶ ValidationReport

[κµ­μ–΄/μμ–΄]
DraftItem β”€β”€β–¶ AG-VAL β”€β”€β–¶ AG-SAFE β”€β”€β–¶ ValidationReport

[μ—­μ‚¬/μ‚¬ν]
DraftItem β”€β”€β–¶ AG-VAL β”€β”€β–¶ AG-FACT(μ™Έλ¶€API) β”€β”€β–¶ AG-SAFE β”€β”€β–¶ ValidationReport
```

### 4.2 ν•„μ κ²€μ¦ ν•­λ©

| κ²€μ¦ μ½”λ“ | κ°€μ¤‘μΉ | μ‹¤ν¨ μ‹ μ²λ¦¬ |
|----------|--------|-------------|
| `ANS_UNIQUE` | 1.0 | μ¬μƒμ„± (μµλ€ 3ν) |
| `ANS_CORRECT` | 1.0 | μ¬μƒμ„± (μµλ€ 3ν) |
| `CALC_VERIFY` | 1.0 | μ¬μƒμ„± (μµλ€ 3ν) |
| `FACT_VERIFY` | 1.0 | **μ¦‰μ‹ νκΈ°** |
| `BIAS_FREE` | 1.0 | μ „λ¬Έκ°€ κ²€ν†  |
| `SAFE_CONTENT` | 1.0 | **μ¦‰μ‹ νκΈ°** |

### 4.3 κµμ°¨ κ²€μ¦ (Multi-Model)

| λ λ²¨ | λ¨λΈ μ | μ‚¬μ© λ¨λΈ | μ μ© κΈ°μ¤€ |
|------|--------|----------|----------|
| 1 | 1 | Gemini Flash | κΈ°λ³Έ (μν•™/κ³Όν•™) |
| 2 | 2 | + GPT-4o | μ—­μ‚¬/μ‚¬ν |
| 3 | 3 | + Claude Sonnet | λ―Όκ° μ£Όμ  |
| 4 | 3+ | + μ „λ¬Έκ°€ κ²€ν†  | κ³µμ‹ μ‹ν— μ¶μ  |

---

## 5. μƒνƒ μ „μ΄

```
NEW β”€β”€β–¶ PARSED β”€β”€β–¶ DRAFT β”€β”€β–¶ VERIFY β”€β”€β”¬β”€β”€β–¶ FINAL
                      β–²        β”‚      β”‚
                      β”‚        β”‚      β””β”€β”€β–¶ REJECT
                      β”‚   RETRYβ”‚
                      β””β”€β”€β”€β”€β”€β”€β”€β”€β”
                       (μµλ€ 3ν)
```

| μƒνƒ | μΆ…λ£ μ΅°κ±΄ |
|------|----------|
| `FINAL` | λ¨λ“  κ²€μ¦ PASS |
| `REJECT` | μ¬μ‹λ„ μ΄κ³Ό λλ” μΉλ…μ  μ¤λ¥ |

---

## 6. μ¤λ¥ μ²λ¦¬

### 6.1 μ¬μ‹λ„ κ°€λ¥

| μ¤λ¥ | μ²λ¦¬ |
|------|------|
| κ³„μ‚° μ¤λ¥ (CALC_VERIFY) | P3 μ¬μƒμ„± |
| μ„ νƒμ§€ μ¤‘λ³µ (OPT_OVERLAP) | P3 μ¬μƒμ„± |
| λ³µμ μ •λ‹µ (ANS_NOT_UNIQUE) | P3 μ¬μƒμ„± |
| API νƒ€μ„μ•„μ›ƒ | λ™μΌ λ‹¨κ³„ μ¬μ‹λ„ |

### 6.2 μ¦‰μ‹ νκΈ°

| μ¤λ¥ | μ‚¬μ  |
|------|------|
| μ‚¬μ‹¤ μ¤λ¥ (FACT_VERIFY) | μ‹ λΆ°μ„± ν›Όμ† |
| μ ν•΄ μ½ν…μΈ  (UNSAFE) | μ•μ „ μ •μ±… μ„λ° |
| νΈν–¥ κ°μ§€ (BIAS) | μ „λ¬Έκ°€ κ²€ν†  ν›„ κ²°μ • |

---

## 7. API ν•µμ‹¬ μΈν„°νμ΄μ¤

### 7.1 λ‹¨μΌ λ¬Έν•­ μƒμ„±

```
POST /api/v1/items/generate

Request:
{
  "source_qti": "<assessmentItem>...</assessmentItem>",
  "images": ["base64..."],
  "config": {
    "variation_type": "similar|numerical|structural",
    "target_difficulty": "low|medium|high",
    "subject": "math",
    "grade": "high-2"
  }
}

Response:
{
  "item_id": "gen-xxx",
  "status": "PASS|FAIL",
  "item": { ... },
  "validation_score": 0.95
}
```

### 7.2 λ°°μΉ μƒμ„±

```
POST /api/v1/items/generate/batch

Request:
{
  "items": [...],
  "callback_url": "https://..."
}

Response:
{
  "batch_id": "batch-xxx",
  "status": "processing"
}
```

---

## 8. μ„±λ¥ λ©ν‘

| μ§€ν‘ | λ©ν‘ |
|------|------|
| λ‹¨μΌ λ¬Έν•­ μ²λ¦¬ | < 30μ΄ |
| λ°°μΉ μ²λ¦¬λ‰ | 100λ¬Έν•­/μ‹κ°„ |
| κ²€μ¦ ν†µκ³Όμ¨ | > 75% |
| κ³„μ‚° μ¤λ¥μ¨ | < 1% |

---

## 9. μ°Έμ΅° λ¬Έμ„

| λ¬Έμ„ | λ‚΄μ© |
|------|------|
| [README.md](README.md) | νμ΄ν”„λΌμΈ μΈλ±μ¤, μ—μ΄μ „νΈ λ§¤νΈλ¦­μ¤ |
| [P1-INPUT-SPEC.md](P1-INPUT-SPEC.md) | QTI νμ‹±, μ΄λ―Έμ§€ κ²€μ¦ μƒμ„Έ |
| [P2-ANALYZE-SPEC.md](P2-ANALYZE-SPEC.md) | Vision λ¶„μ„, μμ‹ μ¶”μ¶ μƒμ„Έ |
| [P3-GENERATE-SPEC.md](P3-GENERATE-SPEC.md) | λ¬Έν•­ μƒμ„± μ „λµ, μ¤λ‹µ μ„¤κ³„ |
| [P4-VALIDATE-SPEC.md](P4-VALIDATE-SPEC.md) | κ²€μ¦ λ΅μ§, Code Execution |
| [P5-OUTPUT-SPEC.md](P5-OUTPUT-SPEC.md) | μ΄λ―Έμ§€ μƒμ„±, QTI λ³€ν™, λ΅κΉ… |

---

**λ¬Έμ„ λ**
